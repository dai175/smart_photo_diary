# 実装手順チェックリスト（Smart Photo Diary）

このチェックリストは、Smart Photo Diaryの実装のための具体的なステップを、進捗管理しやすいようチェックボックス形式で整理したものです。アプリはその日に撮影された写真を自動で取得し、AIが日記を生成する機能を提供します。

---

## 1. プロジェクト初期設定
- [x] 1.1 Flutterプロジェクトの初期化（`flutter create smart_photo_diary`）
- [x] 1.2 必要なディレクトリ構成の作成
    - [x] 1.2.1 `lib/features` ディレクトリの作成
    - [x] 1.2.2 `lib/core` ディレクトリの作成
    - [x] 1.2.3 `lib/shared` ディレクトリの作成
- [x] 1.3 Gitリポジトリの初期化
    - [x] 1.3.1 `.gitignore` の作成
    - [x] 1.3.2 最初のコミット

## 2. 依存パッケージの導入
- [x] 2.1 `tflite_flutter` の追加  
  → オンデバイスでTensorFlow Liteモデルを使った画像分類（AI推論）を行うためのパッケージ。
- [x] 2.2 `image_picker` の追加  
  → ユーザーが端末内の写真やカメラ画像を選択できるようにするためのパッケージ。
- [x] 2.3 `hive` および `hive_flutter` の追加  
  → 端末ローカルに日記データなどを保存するための軽量・高速なNoSQLデータベース。`hive_flutter`はFlutterとの連携用。
- [x] 2.4 `path_provider` の追加  
  → 画像やデータベースファイルなどを保存する際に、端末の適切なディレクトリパスを取得するためのパッケージ。
- [x] 2.5 `geolocator` の追加（必要に応じて）  
  → 写真撮影時の位置情報（GPS）を取得し、日記生成に活用するためのパッケージ。
- [x] 2.6 `flutter_test`, `mocktail` などテスト用パッケージの追加  
  → アプリの単体テスト・ウィジェットテストやモック作成を行うためのパッケージ群。

## 3. 写真取得・表示機能
- [ ] 3.1 その日に撮影された写真を自動取得する機能
    - [ ] 3.1.1 `photo_manager`パッケージの導入・設定
    - [ ] 3.1.2 日付フィルターによる写真取得処理
    - [ ] 3.1.3 権限リクエスト処理の実装
    - [ ] 3.1.4 メタデータ（撮影日時、位置情報など）の取得
- [ ] 3.2 ユーザーによる手動写真選択機能
    - [ ] 3.2.1 `image_picker`を使ったカメラ起動機能
    - [ ] 3.2.2 `image_picker`を使ったギャラリーからの手動選択
    - [ ] 3.2.3 手動選択と自動取得写真の統合
- [ ] 3.3 写真の表示と選択機能
    - [ ] 3.3.1 ホーム画面での横スクロールリスト表示
    - [ ] 3.3.2 写真選択・解除機能の実装
    - [ ] 3.3.3 選択状態の視覚的フィードバック

## 4. 画像解析（ラベル抽出）
- [ ] 4.1 TFLiteモデルファイルの準備
    - [ ] 4.1.1 適切な画像分類モデルの選定
    - [ ] 4.1.2 モデルファイル（.tflite）のassets配置
    - [ ] 4.1.3 pubspec.yamlへのassets追記
- [ ] 4.2 `tflite_flutter`で画像分類を実装
    - [ ] 4.2.1 モデルのロード処理実装
    - [ ] 4.2.2 画像前処理（リサイズ等）
    - [ ] 4.2.3 推論実行・ラベル取得
- [ ] 4.3 分類ラベルのUI表示
    - [ ] 4.3.1 推論結果の表示Widget
    - [ ] 4.3.2 ラベル選択・修正UI（任意）

## 5. 日記自動生成ロジック
- [ ] 5.1 テンプレート・ルールベースの文章生成関数の実装
    - [ ] 5.1.1 テンプレートパターンの作成
    - [ ] 5.1.2 ラベル・時刻・位置情報を挿入するロジック実装
- [ ] 5.2 生成日記文のUI表示
    - [ ] 5.2.1 生成文のプレビューWidget
    - [ ] 5.2.2 編集用テキストフィールド

## 6. 日記エントリー管理
- [ ] 6.1 日記エントリーの保存（Hiveへの書き込み）
    - [ ] 6.1.1 モデルクラスの作成
    - [ ] 6.1.2 Hiveアダプタの作成
    - [ ] 6.1.3 保存処理の実装
- [ ] 6.2 日記エントリー一覧画面の実装
    - [ ] 6.2.1 一覧表示Widget
    - [ ] 6.2.2 日付・写真サムネイル表示
- [ ] 6.3 日記エントリー詳細画面の実装
    - [ ] 6.3.1 詳細表示Widget
    - [ ] 6.3.2 編集・削除機能

## 7. 統計・カレンダー機能
- [ ] 7.1 統計情報の集計・表示
    - [ ] 7.1.1 記録件数・連続記録日数の計算
    - [ ] 7.1.2 統計表示Widget
- [ ] 7.2 カレンダーUIの実装
    - [ ] 7.2.1 カレンダーWidgetの導入
    - [ ] 7.2.2 記録日ハイライト表示

## 8. テスト・デバッグ
- [ ] 8.1 単体テストの作成
    - [ ] 8.1.1 モデル・ロジックのテスト
    - [ ] 8.1.2 画像分類・日記生成のテスト
- [ ] 8.2 ウィジェットテストの作成
    - [ ] 8.2.1 主要画面のテスト
- [ ] 8.3 実機・エミュレータでの動作確認
    - [ ] 8.3.1 Android端末での確認
    - [ ] 8.3.2 iOS端末での確認

## 9. ドキュメント整備
- [ ] 9.1 README・開発ガイド・設計資料の更新
- [ ] 9.2 今後の改善点や課題の整理

---

各項目を順次チェックしながら開発を進めてください。
ご質問や追加要件があれば、docs/以下に追記してください。
