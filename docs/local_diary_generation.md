# ローカルでの日記自動生成方法

このドキュメントでは、Smart Photo DiaryのMVPにおける「ローカル端末のみで日記を自動生成する仕組み」についてまとめます。

---

## 1. 全体フロー
1. ユーザーが写真を選択
2. 写真をオンデバイスAI（TFLiteなど）で解析
3. 主要な被写体やシーン情報を抽出
4. テンプレートやルールベースで日記テキストを生成
5. 必要に応じてユーザーが編集・保存

---

## 2. 画像解析（被写体・シーン分類）
- **使用技術例**: TensorFlow Lite（tflite_flutterプラグイン）
- **モデル例**: MobileNetV2, EfficientNet Lite などの軽量画像分類モデル
- **出力例**: 「food」「cat」「book」「cafe」「sky」などのラベル

### 実装例
- 選択写真をモデルに入力し、最も確率の高いラベルを取得
- 複数ラベル（上位3つなど）を抽出して組み合わせも可能

---

## 3. 日記文の生成ロジック
- **テンプレートベース生成**
  - 例: 「今日は{場所}で{被写体}の写真を撮った。とても{感想}な一日だった。」
- **ルールベース補完**
  - ラベルや撮影時刻、位置情報から文を自動構成
  - 例: 「朝の散歩で空の写真を撮影。清々しい気分で一日を始められた。」
- **感情や雰囲気の推定（オプション）**
  - 明るさや色調から「楽しい」「落ち着いた」などの表現を付加

### サンプルテンプレート
- 「今日は{場所}で{被写体}の写真を撮りました。」
- 「{時刻}に{被写体}を見て、{感想}な気分になりました。」

---

## 4. ユーザー編集
- 生成された日記文はユーザーが自由に編集可能
- 編集内容を学習し、今後のテンプレート改善に活用（MVP後の拡張案）

---

## 5. プライバシーと制限事項
- すべての処理は端末内で完結
- クラウド送信や外部API利用は行わない
- モデル精度や表現の多様性には限界がある（今後の改善余地）

---

## 参考パッケージ
- tflite_flutter
- image_picker
- geolocator（位置情報取得、オプション）

---

ご質問や追加要件があれば、docs/以下に追記してください。
