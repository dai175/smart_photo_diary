# ホーム画面タブ統一計画

## 概要

現在のホーム画面にある「今日」と「過去」のタブを統一し、Googleフォト風のタイムライン表示に変更する計画です。これにより、よりシンプルで直感的なユーザー体験を実現します。

## 現状の課題

### 既存の実装
- 「今日」タブ：`getTodayPhotos()` でその日の写真のみ表示
- 「過去」タブ：`getPhotosInDateRange()` で日付範囲指定、カレンダー表示あり
- 各タブで異なる`PhotoSelectionController`を使用
- UI/UXに一貫性がない
- カレンダー機能が複雑で使いにくい

### 問題点
1. タブ切り替えの認知負荷
2. 過去の写真探索の難しさ
3. 複雑なカレンダーUI
4. コード重複とメンテナンス性の低さ
5. 最近の日記セクションによる画面の煩雑さ

## 最終的な対応方針

### 新UI設計（極限までシンプル）

#### 写真未選択時の表示
```
┌─────────────────────────────────┐
│ 2025年1月15日                📊 │  ← ヘッダー（変更なし）
├─────────────────────────────────┤  
│                                 │
│ 今日                           │  ← シンプルな日付ヘッダー
│ 📷 📷 📷                      │  　（矢印なし、全て選択可能）
│ 📷 📷                         │
├─────────────────────────────────┤
│ 昨日                           │  
│ 📷 📷 📷 📷                   │  ← 全て選択可能
├─────────────────────────────────┤
│ 2025年1月                     │  ← 月単位でグルーピング
│ 📷 📷 📷                      │  ← 全て選択可能
│ 📷 📷 📷 📷                   │
│ 📷 📷                         │
├─────────────────────────────────┤
│ 2024年12月                    │  ← 無限スクロール
│ 📷 📷 📷 📷                   │
│ 📷 📷                         │
│       ⋮                        │
│                                 │
│                              📷  │  ← スマートFAB（カメラ）
└─────────────────────────────────┘     アイコンのみ表示
```

#### 「今日」の写真を1枚選択した時の表示
```
┌─────────────────────────────────┐
│ 2025年1月15日                📊 │  ← ヘッダー（変更なし）
├─────────────────────────────────┤  
│                                 │
│ 今日                           │  ← 今日のヘッダー
│ 📷✓📷 📷                      │  ← 今日の写真は選択可能（通常表示）
│ 📷 📷                         │
├─────────────────────────────────┤
│ 昨日                           │  
│ 🔹📷 📷 📷                    │  ← 他の日付は薄い表示（選択不可）
├─────────────────────────────────┤
│ 2025年1月                     │  
│ 🔹📷 📷 📷                    │  ← 他の日付は薄い表示（選択不可）
│ 📷 📷 📷 📷                   │
│ 📷 📷                         │
├─────────────────────────────────┤
│ 2024年12月                    │  
│ 🔹📷 📷 📷                    │  ← 他の日付は薄い表示（選択不可）
│ 📷 📷                         │
│       ⋮                        │
│                                 │
│                              ✨  │  ← スマートFAB（AI作成）
└─────────────────────────────────┘     
```

### 主要な変更点

#### 1. タブ統合
- 「今日」「過去」タブを完全削除
- 単一のタイムライン表示に統合
- TabControllerの削除

#### 2. 日付ヘッダーの簡素化
- 「今日」「昨日」：そのまま表示
- それ以前：「YYYY年MM月」形式
- 装飾的な矢印アイコン（▼）は削除

#### 3. FAB機能の統合・改善
- **未選択時**: 📷 カメラアイコン → 撮影機能
- **選択時**: ✨ AI作成アイコン → 日記作成機能
- `FloatingActionButton.extended` → `FloatingActionButton`（アイコンのみ）
- tooltip で詳細情報を提供

#### 4. 不要要素の削除
- 期間フィルター（今日、昨日、過去7日等）の削除
- カレンダー表示機能の削除
- 「最近の日記」セクションの削除
- 日記作成ボタン（インライン）の削除

#### 5. 技術的改善
- `CustomScrollView` + `Sliver` ベースの実装
- 月単位での写真グルーピング
- 遅延読み込みとキャッシュの最適化
- 既存の`OptimizedPhotoGridWidget`の再利用

#### 6. 日付制限の視覚的フィードバック
- **写真未選択時**: 全ての写真が通常表示で選択可能
- **写真選択時**: 選択した日付以外の写真は薄い表示（opacity: 0.3）で選択不可を明示
- **同一日付制限**: 既存のロジックを維持しつつ、UI上でより直感的に表現
- **ユーザビリティ向上**: なぜ選択できないかを視覚的に理解可能

## 実装上のメリット

### UX改善
1. **直感的操作**: 自然な時系列スクロール
2. **写真発見性向上**: 見ながら探せる
3. **操作の簡素化**: スクロールのみでアクセス
4. **視覚的クリーンさ**: 余計な要素の排除

### 技術的メリット
1. **コード削減**: タブ制御、最近の日記ロジック削除
2. **メンテナンス性向上**: 単一コンポーネントで管理
3. **パフォーマンス改善**: レンダリング負荷軽減
4. **実装コスト低下**: 既存コンポーネントの活用

## 既存機能の代替手段

### 日記へのアクセス
- **現在**: 最近の日記セクション
- **変更後**: ボトムナビゲーションの「📚 日記」タブを活用

### 写真の期間フィルタリング
- **現在**: フィルターボタン
- **変更後**: 自然なスクロールによる探索

### プラン制限の表示
- **現在**: 過去タブでのアクセス範囲表示
- **変更後**: ヘッダーの使用状況アイコン（📊）で管理

## リスク評価

### 低リスク要因
1. **既存コンポーネント活用**: `OptimizedPhotoGridWidget`等を再利用
2. **段階的実装可能**: Phase分けによる安全な移行
3. **機能削減中心**: 新機能追加ではなく簡素化
4. **ユーザー慣れ**: Googleフォト等で一般的なUI

### 想定リスク対策
1. **写真探索の困難**: 月単位グルーピングで緩和
2. **操作の混乱**: tooltipとアニメーションでガイド
3. **パフォーマンス**: 遅延読み込みで対応

## 成功指標

### 定量的指標
- 写真選択完了時間の短縮
- スクロール操作の増加
- 日記作成完了率の向上

### 定性的指標
- UI/UXのシンプルさ
- 操作の直感性
- 視覚的クリーンさ

---

## 次のステップ

この計画に基づいて、段階的な実装を開始します。詳細な実装チェックリストは別途作成され、各フェーズでの進捗管理を行います。